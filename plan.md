# ICHBooking ‚Äî –ü–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞ (ROADMAP)

–¶–µ–ª–∏:
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ).
- –°–ª–µ–¥–æ–≤–∞—Ç—å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ: domain / application / infrastructure / interfaces.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DRF, JWT (–≤ –∫—É–∫–∞—Ö), MySQL; –ø–æ–∑–∂–µ ‚Äî Docker –∏ –¥–µ–ø–ª–æ–π –Ω–∞ AWS.

–°—Ç–∞—Ç—É—Å–Ω—ã–µ —Ç–µ–≥–∏:
- [ ] –ù–µ –Ω–∞—á–∞—Ç–æ
- üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ
- ‚úÖ –ì–æ—Ç–æ–≤–æ

–ù–∞–≤–∏–≥–∞—Ü–∏—è:
- –≠—Ç–∞–ø 0. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –≠—Ç–∞–ø 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –≠—Ç–∞–ø 2. –û–±—ä—è–≤–ª–µ–Ω–∏—è (CRUD + –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å) (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –≠—Ç–∞–ø 3. –ü–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –≠—Ç–∞–ø 4. –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –≠—Ç–∞–ø 5. –†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –≠—Ç–∞–ø 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å, –∏—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã)
- –≠—Ç–∞–ø 7. –¢–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –≠—Ç–∞–ø 8. Docker –∏ AWS (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: Git-flow –∏ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞—á

---

## –≠—Ç–∞–ø 0. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ó–∞–¥–∞—á–∞: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –ø–∞–∫–µ—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ MySQL
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏: core/settings.py (DATABASES)
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥—Ä–∞–π–≤–µ—Ä: mysqlclient (–∏–ª–∏ PyMySQL)
  - –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö ICHBooking –≤ MySQL, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø—ã –≤ ENV.
  - –ú–∏–≥—Ä–∞—Ü–∏–∏: python manage.py makemigrations && migrate

- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ DRF
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å djangorestframework
  - core/settings.py: –¥–æ–±–∞–≤–∏—Ç—å 'rest_framework' –∏ –±–∞–∑–æ–≤—ã–µ REST_FRAMEWORK –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- ‚úÖ JWT –≤ –∫—É–∫–∞—Ö (DRF + SimpleJWT)
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å djangorestframework-simplejwt
  - core/settings.py: SIMPLE_JWT –∫–æ–Ω—Ñ–∏–≥ (lifetime, cookie names, rotation, samesite, secure), DRF –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
  - src/users/interfaces/rest/urls.py: JWT endpoints (login/refresh/logout)
  - src/users/interfaces/rest/views.py: –≤—å—é –¥–ª—è –ª–æ–≥–∏–Ω–∞/–ª–æ–≥–∞—É—Ç–∞ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π/–æ—á–∏—Å—Ç–∫–æ–π cookie
  - CSRF: –ø—Ä–æ–¥—É–º–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–µ–Ω–∏–µ CSRF –∏–∑ –∫—É–∫–∏ + –∑–∞–≥–æ–ª–æ–≤–æ–∫)

- ‚úÖ Swagger/OpenAPI
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å drf-spectacular (–∏–ª–∏ drf-yasg)
  - core/settings.py: spectacular –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - core/urls.py: —Å—Ö–µ–º—ã /api/schema/, /api/docs/

- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è INSTALLED_APPS
  - core/settings.py: 'src.users', 'src.accommodations', 'src.bookings', 'src.reviews', 'src.common' (payments –æ—Ç–ª–æ–∂–∏–º)

–§–∞–π–ª—ã –∏ —á—Ç–æ –≤ –Ω–∏—Ö –±—É–¥–µ—Ç:
- core/settings.py ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î (MySQL), DRF, JWT, Swagger.
- core/urls.py ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ Swagger.
- src/*/interfaces/rest/urls.py ‚Äî –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º.

---

## –≠—Ç–∞–ø 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)

–¶–µ–ª–∏: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, —Ä–æ–ª–∏ (–∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å/–∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä), —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤.

- ‚úÖ –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ —Ä–æ–ª–∏
  - src/users/domain/entities.py ‚Äî UserEntity (id, name, email, roles: {host, guest}, is_active)
  - src/users/domain/value_objects.py ‚Äî Email, PasswordHash (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
  - src/users/domain/repository_interfaces.py ‚Äî IUserRepository (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–æ–∏—Å–∫–∞/—Å–æ–∑–¥–∞–Ω–∏—è)
  - src/users/domain/services.py ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π —Ä–æ–ª–µ–π

- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (use-cases)
  - src/users/application/commands.py ‚Äî RegisterUser, AssignRoles
  - src/users/application/queries.py ‚Äî GetCurrentUser
  - src/users/application/use_cases/ ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥/–∑–∞–ø—Ä–æ—Å–æ–≤

- ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (ORM –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
  - src/users/infrastructure/orm/models.py ‚Äî –∫–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å User (–Ω–∞ –±–∞–∑–µ AbstractUser)
    - –ü–æ–ª—è: name (–∏–ª–∏ first_name/last_name), email(unique), —Ä–æ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, JSON/ManyToMany/Choices/—Ñ–ª–∞–≥–∏)
  - src/users/infrastructure/repositories.py ‚Äî Django-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è IUserRepository
  - core/settings.py ‚Äî AUTH_USER_MODEL = 'users.User'
  - src/users/infrastructure/admin.py ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –≤ –∞–¥–º–∏–Ω–∫–µ

- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (REST, JWT)
  - src/users/interfaces/rest/serializers.py ‚Äî RegisterSerializer, UserSerializer
  - src/users/interfaces/rest/views.py ‚Äî RegisterView, LoginView (JWT cookie), LogoutView, MeView
  - src/users/interfaces/rest/permissions.py ‚Äî IsHost, IsGuest
  - src/users/interfaces/rest/urls.py ‚Äî /auth/register/, /auth/login/, /auth/logout/, /auth/me/

- ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
  - –†–æ–ª—å host: —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
  - –†–æ–ª—å guest: –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å/—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å

---

## –≠—Ç–∞–ø 2. –û–±—ä—è–≤–ª–µ–Ω–∏—è (CRUD + –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å) (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)

–¶–µ–ª–∏: –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (–∞–∫—Ç–∏–≤–Ω–æ/–Ω–µ–∞–∫—Ç–∏–≤–Ω–æ).

- ‚úÖ –î–æ–º–µ–π–Ω
  - src/accommodations/domain/entities.py ‚Äî Accommodation (id, title, description, location, price, rooms, type, is_active, owner_id, created_at)
  - src/accommodations/domain/value_objects.py ‚Äî Location (city, region, country="DE"), Money/Price, HousingType (Enum)
  - src/accommodations/domain/dtos.py ‚Äî AccommodationDTO
  - src/accommodations/domain/repository_interfaces.py ‚Äî IAccommodationRepository
  - src/accommodations/domain/services.py ‚Äî –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã (–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ü–µ–Ω—ã, –Ω–∞–∑–≤–∞–Ω–∏—è –∏ —Ç.–¥.)

- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (use-cases)
  - src/accommodations/application/commands.py ‚Äî CreateAccommodation, UpdateAccommodation, DeleteAccommodation, ToggleAvailability
  - src/accommodations/application/queries.py ‚Äî GetAccommodationById
  - src/accommodations/application/use_cases/ ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

- ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
  - src/accommodations/infrastructure/orm/models.py ‚Äî ORM –º–æ–¥–µ–ª—å Accommodation (FK –Ω–∞ users.User)
  - src/accommodations/infrastructure/repositories.py ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è IAccommodationRepository
  - src/accommodations/infrastructure/admin.py ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏

- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (REST)
  - src/accommodations/interfaces/rest/serializers.py ‚Äî AccommodationCreateUpdateSerializer, AccommodationDetailSerializer
  - src/accommodations/interfaces/rest/views.py ‚Äî ViewSet/–∫–ª–∞—Å—Å—ã –¥–ª—è CRUD –∏ toggle
    - Create/Update/Delete ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è host-–≤–ª–∞–¥–µ–ª—å—Ü–∞
    - Toggle availability ‚Äî —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü
  - src/accommodations/interfaces/rest/filters.py ‚Äî —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–∑–∂–µ (—ç—Ç–∞–ø 3)
  - src/accommodations/interfaces/rest/permissions.py ‚Äî IsOwnerOrReadOnly, IsHost
  - src/accommodations/interfaces/rest/urls.py ‚Äî /accommodations/‚Ä¶

---

## –≠—Ç–∞–ø 3. –ü–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)

–¶–µ–ª–∏: –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ/–æ–ø–∏—Å–∞–Ω–∏–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞.

- ‚úÖ –î–æ–º–µ–π–Ω
  - src/accommodations/domain/dtos.py ‚Äî SearchQueryDTO (keyword, price_min/max, city/region, rooms_min/max, type, sort)
  - src/accommodations/domain/services.py ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞

- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  - src/accommodations/application/queries.py ‚Äî SearchAccommodations
  - src/accommodations/application/use_cases/ ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∏—Å–∫–∞ (–¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π; –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É)

- ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
  - src/accommodations/infrastructure/repositories.py ‚Äî –º–µ—Ç–æ–¥—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ ORM (Q, annotate)
  - –ò–Ω–¥–µ–∫—Å—ã –≤ –ë–î: title, city/region, created_at, price

- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (REST)
  - src/accommodations/interfaces/rest/filters.py ‚Äî DRF —Ñ–∏–ª—å—Ç—Ä—ã/FilterSet
  - src/accommodations/interfaces/rest/views.py ‚Äî endpoint –ø–æ–∏—Å–∫–∞: /accommodations/search/
  - –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É: price asc/desc, created_at asc/desc

---

## –≠—Ç–∞–ø 4. –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)

–¶–µ–ª–∏: –°–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö, –æ—Ç–º–µ–Ω–∞, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ö–æ—Å—Ç–æ–º.

- ‚úÖ –î–æ–º–µ–π–Ω
  - src/bookings/domain/entities.py ‚Äî Booking (id, accommodation_id, guest_id, host_id, start_date, end_date, status: REQUESTED/CONFIRMED/CANCELLED/REJECTED, created_at)
  - src/bookings/domain/value_objects.py ‚Äî StayPeriod (–≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç)
  - src/bookings/domain/dtos.py ‚Äî BookingDTO
  - src/bookings/domain/repository_interfaces.py ‚Äî IBookingRepository
  - src/bookings/domain/services.py ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –¥–∞—Ç, –ø–æ–ª–∏—Ç–∏–∫–∞ –æ—Ç–º–µ–Ω—ã

- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  - src/bookings/application/commands.py ‚Äî CreateBooking, CancelBooking, ConfirmBooking, RejectBooking
  - src/bookings/application/queries.py ‚Äî ListMyBookings (guest), ListMyRequests (host)
  - src/bookings/application/use_cases/ ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

- ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
  - src/bookings/infrastructure/orm/models.py ‚Äî ORM Booking (FK –Ω–∞ User, Accommodation)
  - src/bookings/infrastructure/repositories.py ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è IBookingRepository; –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (REST)
  - src/bookings/interfaces/rest/serializers.py ‚Äî BookingCreateSerializer, BookingDetailSerializer
  - src/bookings/interfaces/rest/views.py ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
    - POST /bookings/ ‚Äî —Å–æ–∑–¥–∞—Ç—å
    - GET /bookings/me/ ‚Äî –º–æ–∏ (guest)
    - GET /bookings/requests/ ‚Äî –∑–∞–ø—Ä–æ—Å—ã, –≥–¥–µ —è host
    - POST /bookings/{id}/cancel/
    - POST /bookings/{id}/confirm/
    - POST /bookings/{id}/reject/
  - –†–∞–∑—Ä–µ—à–µ–Ω–∏—è: –≥–æ—Å—Ç—é ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–∏; —Ö–æ—Å—Ç—É ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å/–æ—Ç–∫–ª–æ–Ω—è—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ —Å–≤–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

---

## –≠—Ç–∞–ø 5. –†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)

–¶–µ–ª–∏: –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—é –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è; —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤.

- ‚úÖ –î–æ–º–µ–π–Ω
  - src/reviews/domain/entities.py ‚Äî Review (id, accommodation_id, author_id, rating, text, created_at)
  - src/reviews/domain/dtos.py ‚Äî ReviewDTO
  - src/reviews/domain/repository_interfaces.py ‚Äî IReviewRepository
  - src/reviews/domain/services.py ‚Äî –ø–æ–ª–∏—Ç–∏–∫–∞: –æ—Ç–∑—ã–≤ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≥–æ—Å—Ç—é, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  - src/reviews/application/commands.py ‚Äî CreateReview
  - src/reviews/application/queries.py ‚Äî ListReviewsForAccommodation
  - src/reviews/application/use_cases/ ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

- ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
  - src/reviews/infrastructure/orm/models.py ‚Äî ORM Review
  - src/reviews/infrastructure/repositories.py ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è IReviewRepository

- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (REST)
  - src/reviews/interfaces/rest/serializers.py ‚Äî ReviewCreateSerializer, ReviewSerializer
  - src/reviews/interfaces/rest/views.py ‚Äî POST /reviews/, GET /accommodations/{id}/reviews/
  - –ü—Ä–∞–≤–∞: –∞–≤—Ç–æ—Ä ‚Äî —Ç–æ–ª—å–∫–æ –≥–æ—Å—Ç—å —Å –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

---

## –≠—Ç–∞–ø 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 6.1. –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å
- üîÑ –ü–æ–¥—Å—á—ë—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤/–æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  - –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã
  - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã: –ø–∞—Ä–∞–º–µ—Ç—Ä sort=popular

### 6.2. –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  - src/common/domain/entities.py ‚Äî SearchQueryLog
  - src/common/infrastructure/orm/models.py ‚Äî ORM –º–æ–¥–µ–ª—å
  - –ó–∞–ø–∏—Å—å –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –ø–æ–∏—Å–∫–∞ (—ç—Ç–∞–ø 3)
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç: GET /search/popular/ ‚Äî —Ç–æ–ø —á–∞—Å—Ç—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

### 6.3. –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
  - src/common/domain/entities.py ‚Äî ListingViewLog
  - src/common/infrastructure/orm/models.py ‚Äî ORM –º–æ–¥–µ–ª—å
  - –•—É–∫ –≤ –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º (—ç—Ç–∞–ø 3)

---

## –≠—Ç–∞–ø 7. –¢–µ—Å—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

- [ ] Unit-—Ç–µ—Å—Ç—ã –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
  - src/*/tests/unit/ ‚Äî —Ç–µ—Å—Ç—ã –ø—Ä–∞–≤–∏–ª, –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (DRF)
  - src/*/tests/integration/ ‚Äî API –∫–µ–π—Å—ã: –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, CRUD –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –ø–æ–∏—Å–∫, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Ç–∑—ã–≤—ã
- [ ] –§–∏–∫—Å—Ç—É—Ä—ã: —Ñ–∞–±—Ä–∏–∫–∏ –¥–æ–º–µ–Ω–Ω—ã—Ö DTO

---

## –≠—Ç–∞–ø 8. Docker –∏ AWS

- [ ] Docker
  - Dockerfile ‚Äî —Å–±–æ—Ä–∫–∞ Django + gunicorn
  - docker-compose.yml ‚Äî web + MySQL
  - ENV/—Å–µ–∫—Ä–µ—Ç—ã ‚Äî —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] AWS
  - EC2 –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, RDS –¥–ª—è MySQL (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ reverse proxy (Nginx), —Å—Ç–∞—Ç–∏–∫–∞/–º–µ–¥–∏–∞ (S3 ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - CI/CD (GitHub Actions) ‚Äî –¥–µ–ø–ª–æ–π –Ω–∞ EC2

---

## Git-flow –∏ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞—á

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤–µ—Ç–æ–∫:
1. feature/setup-infra (–≠—Ç–∞–ø 0)
2. feature/users-auth (–≠—Ç–∞–ø 1)
3. feature/accommodations-crud (–≠—Ç–∞–ø 2)
4. feature/search-filter-sort (–≠—Ç–∞–ø 3)
5. feature/bookings (–≠—Ç–∞–ø 4)
6. feature/reviews (–≠—Ç–∞–ø 5)
7. feature/extra-popularity-search-history-views (–≠—Ç–∞–ø 6)
8. feature/tests (–≠—Ç–∞–ø 7)
9. feature/docker-aws (–≠—Ç–∞–ø 8)

–ö–∞–∂–¥–∞—è –≤–µ—Ç–∫–∞:
- –†–µ–∞–ª–∏–∑—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ —Å–ª–æ—è–º (domain ‚Üí application ‚Üí infrastructure ‚Üí interfaces).
- –ü–∏—à–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ infrastructure/orm/models.py.
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ‚Üí PR ‚Üí —Ä–µ–≤—å—é ‚Üí merge –≤ main.

---

## –°–≤–æ–¥–∫–∞ –ø–æ —Ñ–∞–π–ª–∞–º (–∫—É–¥–∞ –ø–∏—Å–∞—Ç—å –∫–æ–¥)

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
  - domain: src/users/domain/* (entities, repository_interfaces, services)
  - application: src/users/application/* (commands/queries/use_cases)
  - infrastructure: src/users/infrastructure/orm/models.py, repositories.py
  - interfaces: src/users/interfaces/rest/* (serializers, views, urls, permissions)

- –û–±—ä—è–≤–ª–µ–Ω–∏—è:
  - domain: src/accommodations/domain/*
  - application: src/accommodations/application/*
  - infrastructure: src/accommodations/infrastructure/*
  - interfaces: src/accommodations/interfaces/rest/*

- –ü–æ–∏—Å–∫/–§–∏–ª—å—Ç—Ä—ã/–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:
  - application/queries + infrastructure/repositories + interfaces/rest/filters

- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
  - domain/application/infrastructure/interfaces –≤ src/bookings/*

- –û—Ç–∑—ã–≤—ã:
  - domain/application/infrastructure/interfaces –≤ src/reviews/*

- –û–±—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏:
  - src/common/* (–∏—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞, –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤)
  - src/shared/* (errors, result, utils)

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ UX

- JWT –≤ –∫—É–∫–∞—Ö: HttpOnly, Secure (–≤ –ø—Ä–æ–¥–µ), SameSite=Lax/None (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω), —Ä–µ—Ñ—Ä–µ—à-—Ç–æ–∫–µ–Ω –≤ –∫—É–∫–µ, access ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤ –∫—É–∫–µ/–ø–∞–º—è—Ç–∏.
- CSRF: –¥–ª—è cookie-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å CSRF —Ç–æ–∫–µ–Ω.
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: serializers + –¥–æ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞.
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ –ª–∏–º–∏—Ç—ã: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DRF –ø–∞–≥–∏–Ω–∞—Ü–∏—é; –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–æ–∫.